# Guild for releasing a new Graphframe version

## How to build GraphFrame package ?

To build a GraphFrame package for releasing, you only need to run the following command:

```
cd graphframe_repo

# build graphframe against scala 2.12.12 version
build/sbt ++2.12.12 clean spDist

# build graphframe against scala 2.13.8 version
build/sbt ++2.13.8 clean spDist
```

The above command execution generates zip file with the following path
```
target/graphframes-{graphframe-version}-spark{spark-version}-s_{scala_version}.zip
```
The zip file is the Graphframe package we need to publish, the zip file contains JAR file and POM file.
Note that python module files are included in the JAR file.

## How to publish the GraphFrame package ?

To publish the GraphFrame package, you need to have "admin" role of https://github.com/graphframes/graphframes project.

then you need to log in https://spark-packages.org/package/graphframes/graphframes website,
then upload the zip file generated by instructions in "How to build GraphFrame package" section.

## How to publish the GraphFrame doc ?

GraphFrames docs are hosted in 'https://graphframes.github.io/graphframes/'. To publish the docs, you just need to build the doc content, then push the doc content to gh-pages branch of the https://github.com/graphframes/graphframes project.

Before building the docs, you need to install jekyll, please refer to 'docs/README.md' for details.

The following command is for building and publishing doc:
```
cd graphframe_repo

cd ./docs
SKIP_SCALADOC=0 PRODUCTION=1 jekyll build

git fetch upstream gh-pages:gh-pages
git checkout gh-pages

# The doc content is under docs/_site directory
git add -f docs/_site

git commit -m "doc update for version xx"
git push upstream gh-pages
```

